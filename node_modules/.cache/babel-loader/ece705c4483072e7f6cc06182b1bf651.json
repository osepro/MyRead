{"ast":null,"code":"import _toConsumableArray from \"/Users/Ose/Documents/Osemwengie/reactproj/reactnd-project-myreads-starter/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/Ose/Documents/Osemwengie/reactproj/reactnd-project-myreads-starter/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/Ose/Documents/Osemwengie/reactproj/reactnd-project-myreads-starter/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/Ose/Documents/Osemwengie/reactproj/reactnd-project-myreads-starter/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/Ose/Documents/Osemwengie/reactproj/reactnd-project-myreads-starter/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/Ose/Documents/Osemwengie/reactproj/reactnd-project-myreads-starter/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/Ose/Documents/Osemwengie/reactproj/reactnd-project-myreads-starter/src/App.js\";\nimport React from \"react\";\nimport * as BooksAPI from \"./BooksAPI\";\nimport \"./App.css\";\nimport Search from \"./Search\";\nimport CurrentlyReading from \"./CurrentlyReading\";\nimport WanttoRead from \"./WanttoRead\";\nimport Read from \"./Read\";\nimport AddBook from \"./AddBook\";\nimport SearchResult from \"./SearchResult\";\nimport { Route } from \"react-router-dom\";\nimport { debounce } from \"debounce\";\nimport Notification from \"./Notification\";\n\nvar BooksApp =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(BooksApp, _React$Component);\n\n  function BooksApp() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, BooksApp);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(BooksApp)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      /**\n       * TODO: Instead of using this state variable to keep track of which page\n       * we're on, use the URL in the browser's address bar. This will ensure that\n       * users can use the browser's back and forward buttons to navigate between\n       * pages, as well as provide a good URL they can bookmark and share.\n       */\n      books: [],\n      searchItem: \"\",\n      message: \"\",\n      active: false,\n      status: true,\n      loading: \"\",\n      currentlyReading: [],\n      read: [],\n      wantToRead: [],\n      shelfFinder: [],\n      renderCurrentlyRead: true,\n      renderRead: true,\n      renderWantToRead: true\n    };\n\n    _this.searchForBooks = function (event) {\n      debounce(_this.setState({\n        searchItem: event.target.value\n      }), 500);\n\n      _this.APIDataCall(_this.state.searchItem);\n    };\n\n    _this.APIDataCall = function (search) {\n      _this.setState({\n        books: []\n      });\n\n      _this.setState({\n        loading: \"loading...\"\n      });\n\n      if (search.trim() && search.trim().length > 0) {\n        BooksAPI.search(search.trim()).then(function (data) {\n          data.map(function (value) {\n            return _this.setState({\n              books: _toConsumableArray(_this.state.books).concat([value]),\n              loading: \"\"\n            });\n          });\n        }).catch(function (err) {\n          return console.log(\"Book not found\");\n        });\n      }\n    };\n\n    _this.addBookCheck = function (booksAdd) {\n      if (_this.state.currentlyReading.some(function (el) {\n        return el.id === booksAdd.id;\n      })) {\n        _this.setState(function (prevState) {\n          return {\n            currentlyReading: prevState.currentlyReading.filter(function (el) {\n              return el.id !== booksAdd.id;\n            })\n          };\n        });\n\n        return {\n          result: true,\n          message: \"Book successfully moved\"\n        };\n      }\n\n      if (_this.state.wantToRead.some(function (el) {\n        return el.id === booksAdd.id;\n      })) {\n        _this.setState(function (prevState) {\n          return {\n            wantToRead: prevState.wantToRead.filter(function (el) {\n              return el.id !== booksAdd.id;\n            })\n          };\n        });\n\n        return {\n          result: true,\n          message: \"Book successfully moved\"\n        };\n      }\n\n      if (_this.state.read.some(function (el) {\n        return el.id === booksAdd.id;\n      })) {\n        _this.setState(function (prevState) {\n          return {\n            read: prevState.read.filter(function (el) {\n              return el.id !== booksAdd.id;\n            })\n          };\n        });\n\n        return {\n          result: true,\n          message: \"Book successfully moved\"\n        };\n      }\n\n      return {\n        result: true,\n        message: \"Book successly added\"\n      };\n    };\n\n    _this.showDisplay = function (message, status) {\n      _this.setState({\n        message: message,\n        active: true,\n        status: status\n      });\n\n      var seconds = 0;\n      var endTimer = setInterval(function () {\n        seconds += 10;\n\n        if (seconds > 2000) {\n          _this.setState({\n            active: false\n          });\n\n          clearInterval(endTimer);\n        }\n      }, 10);\n    };\n\n    _this.getData = function (data) {\n      _this.setState({\n        books: [],\n        shelfFinder: []\n      });\n\n      data.map(function (data) {\n        return _this.setState({\n          books: _toConsumableArray(_this.state.books).concat([data]),\n          shelfFinder: _toConsumableArray(_this.state.shelfFinder).concat([{\n            id: data.id,\n            shelf: data.shelf\n          }])\n        });\n      });\n    };\n\n    _this.bookUpdate = function (book, shelf) {\n      _this.setState({\n        shelfFinder: []\n      });\n\n      BooksAPI.update(book, shelf).then(function (updatedShelf) {\n        return _this.setState({\n          shelfFinder: _toConsumableArray(_this.state.shelfFinder).concat([updatedShelf])\n        });\n      });\n    };\n\n    _this.selectShelf = function (bookId) {\n      var shelfData = _this.state.shelfFinder.filter(function (book) {\n        return book.id === bookId;\n      });\n\n      if (shelfData.length > 0) {\n        if (shelfData[0].shelf === \"currentlyReading\") {\n          return process.env.REACT_APP_CURR_READ;\n        }\n\n        if (shelfData[0].shelf === \"read\") {\n          return process.env.REACT_APP_READ;\n        }\n\n        if (shelfData[0].shelf === \"wantToRead\") {\n          return process.env.REACT_APP_WANT_READ;\n        }\n      } else {\n        return process.env.REACT_APP_NONE;\n      }\n    };\n\n    _this.chooseOption = function (event) {\n      var _event$target = event.target,\n          selectedIndex = _event$target.selectedIndex,\n          options = _event$target.options;\n      var boodID = options[selectedIndex].dataset.bookid;\n\n      var booksAdd = _this.state.books.find(function (book) {\n        return book.id === boodID;\n      });\n\n      var value = options[selectedIndex].text;\n\n      switch (value) {\n        case process.env.REACT_APP_CURR_READ:\n          _this.bookUpdate(booksAdd, \"currentlyReading\");\n\n          _this.setState({\n            renderCurrentlyRead: true\n          });\n\n          break;\n\n        case process.env.REACT_APP_WANT_READ:\n          _this.bookUpdate(booksAdd, \"wantToRead\");\n\n          _this.setState({\n            renderRead: true\n          });\n\n          break;\n\n        case process.env.REACT_APP_READ:\n          _this.bookUpdate(booksAdd, \"read\");\n\n          _this.setState({\n            renderRead: true\n          });\n\n          break;\n\n        default:\n          console.log(\"Nothing selected\");\n      } //this.selectShelf(boodID);\n\n\n      _this.showDisplay(\"Book successly added\", true); //console.log(this.state.shelfFinder);\n\n    };\n\n    return _this;\n  }\n\n  _createClass(BooksApp, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      BooksAPI.getAll().then(function (res) {\n        return _this2.getData(res);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(\"div\", {\n        className: \"app\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }, this.state.message.length > 0 && React.createElement(Notification, {\n        message: this.state.message,\n        showItem: this.state.active ? \"fadeIn\" : \"fadeOut\",\n        status: this.state.status ? \"success\" : \"error\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/search\",\n        render: function render() {\n          return React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 220\n            },\n            __self: this\n          }, React.createElement(Search, {\n            searchItem: _this3.state.searchItem,\n            searchForBooks: _this3.searchForBooks,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 221\n            },\n            __self: this\n          }), React.createElement(SearchResult, {\n            bookList: _this3.state.books,\n            searchItem: _this3.state.searchItem,\n            chooseOption: _this3.chooseOption,\n            loading: _this3.state.loading,\n            shelf: _this3.selectShelf,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 225\n            },\n            __self: this\n          }));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }), React.createElement(Route, {\n        exact: true,\n        path: \"/\",\n        render: function render() {\n          return React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 240\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            className: \"list-books\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 241\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            className: \"list-books-title\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 242\n            },\n            __self: this\n          }, React.createElement(\"h1\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 243\n            },\n            __self: this\n          }, process.env.REACT_APP_MY_READ)), React.createElement(\"div\", {\n            className: \"list-books-content\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 245\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 246\n            },\n            __self: this\n          }, _this3.state.renderCurrentlyRead && React.createElement(CurrentlyReading, {\n            books: _this3.state.books,\n            chooseOption: _this3.chooseOption,\n            shelf: _this3.selectShelf,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 248\n            },\n            __self: this\n          }), _this3.state.renderWantToRead && React.createElement(WanttoRead, {\n            books: _this3.state.books,\n            chooseOption: _this3.chooseOption,\n            shelf: _this3.selectShelf,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 255\n            },\n            __self: this\n          }), _this3.state.renderRead && React.createElement(Read, {\n            books: _this3.state.books,\n            chooseOption: _this3.chooseOption,\n            shelf: _this3.selectShelf,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 262\n            },\n            __self: this\n          })))), React.createElement(AddBook, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 271\n            },\n            __self: this\n          }));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return BooksApp;\n}(React.Component);\n\nexport default BooksApp;","map":{"version":3,"sources":["/Users/Ose/Documents/Osemwengie/reactproj/reactnd-project-myreads-starter/src/App.js"],"names":["React","BooksAPI","Search","CurrentlyReading","WanttoRead","Read","AddBook","SearchResult","Route","debounce","Notification","BooksApp","state","books","searchItem","message","active","status","loading","currentlyReading","read","wantToRead","shelfFinder","renderCurrentlyRead","renderRead","renderWantToRead","searchForBooks","event","setState","target","value","APIDataCall","search","trim","length","then","data","map","catch","err","console","log","addBookCheck","booksAdd","some","el","id","prevState","filter","result","showDisplay","seconds","endTimer","setInterval","clearInterval","getData","shelf","bookUpdate","book","update","updatedShelf","selectShelf","bookId","shelfData","process","env","REACT_APP_CURR_READ","REACT_APP_READ","REACT_APP_WANT_READ","REACT_APP_NONE","chooseOption","selectedIndex","options","boodID","dataset","bookid","find","text","getAll","res","REACT_APP_MY_READ","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport * as BooksAPI from \"./BooksAPI\";\nimport \"./App.css\";\nimport Search from \"./Search\";\nimport CurrentlyReading from \"./CurrentlyReading\";\nimport WanttoRead from \"./WanttoRead\";\nimport Read from \"./Read\";\nimport AddBook from \"./AddBook\";\nimport SearchResult from \"./SearchResult\";\nimport { Route } from \"react-router-dom\";\nimport { debounce } from \"debounce\";\nimport Notification from \"./Notification\";\n\nclass BooksApp extends React.Component {\n  state = {\n    /**\n     * TODO: Instead of using this state variable to keep track of which page\n     * we're on, use the URL in the browser's address bar. This will ensure that\n     * users can use the browser's back and forward buttons to navigate between\n     * pages, as well as provide a good URL they can bookmark and share.\n     */\n    books: [],\n    searchItem: \"\",\n    message: \"\",\n    active: false,\n    status: true,\n    loading: \"\",\n    currentlyReading: [],\n    read: [],\n    wantToRead: [],\n    shelfFinder: [],\n    renderCurrentlyRead: true,\n    renderRead: true,\n    renderWantToRead: true\n  };\n\n  searchForBooks = event => {\n    debounce(this.setState({ searchItem: event.target.value }), 500);\n    this.APIDataCall(this.state.searchItem);\n  };\n\n  APIDataCall = search => {\n    this.setState({\n      books: []\n    });\n\n    this.setState({\n      loading: \"loading...\"\n    });\n    if (search.trim() && search.trim().length > 0) {\n      BooksAPI.search(search.trim())\n        .then(data => {\n          data.map(value =>\n            this.setState({\n              books: [...this.state.books, value],\n              loading: \"\"\n            })\n          );\n        })\n        .catch(err => console.log(\"Book not found\"));\n    }\n  };\n\n  addBookCheck = booksAdd => {\n    if (this.state.currentlyReading.some(el => el.id === booksAdd.id)) {\n      this.setState(prevState => ({\n        currentlyReading: prevState.currentlyReading.filter(\n          el => el.id !== booksAdd.id\n        )\n      }));\n      return {\n        result: true,\n        message: \"Book successfully moved\"\n      };\n    }\n    if (this.state.wantToRead.some(el => el.id === booksAdd.id)) {\n      this.setState(prevState => ({\n        wantToRead: prevState.wantToRead.filter(el => el.id !== booksAdd.id)\n      }));\n      return {\n        result: true,\n        message: \"Book successfully moved\"\n      };\n    }\n\n    if (this.state.read.some(el => el.id === booksAdd.id)) {\n      this.setState(prevState => ({\n        read: prevState.read.filter(el => el.id !== booksAdd.id)\n      }));\n      return {\n        result: true,\n        message: \"Book successfully moved\"\n      };\n    }\n    return {\n      result: true,\n      message: \"Book successly added\"\n    };\n  };\n\n  showDisplay = (message, status) => {\n    this.setState({\n      message,\n      active: true,\n      status\n    });\n    let seconds = 0;\n    const endTimer = setInterval(() => {\n      seconds += 10;\n      if (seconds > 2000) {\n        this.setState({\n          active: false\n        });\n        clearInterval(endTimer);\n      }\n    }, 10);\n  };\n\n  getData = data => {\n    this.setState({\n      books: [],\n      shelfFinder: []\n    });\n\n    data.map(data =>\n      this.setState({\n        books: [...this.state.books, data],\n        shelfFinder: [\n          ...this.state.shelfFinder,\n          {\n            id: data.id,\n            shelf: data.shelf\n          }\n        ]\n      })\n    );\n  };\n\n  bookUpdate = (book, shelf) => {\n    this.setState({\n      shelfFinder: []\n    });\n    BooksAPI.update(book, shelf).then(updatedShelf =>\n      this.setState({\n        shelfFinder: [...this.state.shelfFinder, updatedShelf]\n      })\n    );\n  };\n\n  selectShelf = bookId => {\n    const shelfData = this.state.shelfFinder.filter(book => book.id === bookId);\n    if (shelfData.length > 0) {\n      if (shelfData[0].shelf === \"currentlyReading\") {\n        return process.env.REACT_APP_CURR_READ;\n      }\n\n      if (shelfData[0].shelf === \"read\") {\n        return process.env.REACT_APP_READ;\n      }\n\n      if (shelfData[0].shelf === \"wantToRead\") {\n        return process.env.REACT_APP_WANT_READ;\n      }\n    } else {\n      return process.env.REACT_APP_NONE;\n    }\n  };\n\n  chooseOption = event => {\n    const { selectedIndex, options } = event.target;\n    const boodID = options[selectedIndex].dataset.bookid;\n    const booksAdd = this.state.books.find(book => book.id === boodID);\n    const value = options[selectedIndex].text;\n\n    switch (value) {\n      case process.env.REACT_APP_CURR_READ:\n        this.bookUpdate(booksAdd, \"currentlyReading\");\n        this.setState({\n          renderCurrentlyRead: true\n        });\n        break;\n      case process.env.REACT_APP_WANT_READ:\n        this.bookUpdate(booksAdd, \"wantToRead\");\n        this.setState({\n          renderRead: true\n        });\n        break;\n      case process.env.REACT_APP_READ:\n        this.bookUpdate(booksAdd, \"read\");\n        this.setState({\n          renderRead: true\n        });\n        break;\n      default:\n        console.log(\"Nothing selected\");\n    }\n\n    //this.selectShelf(boodID);\n    this.showDisplay(\"Book successly added\", true);\n    //console.log(this.state.shelfFinder);\n  };\n\n  componentDidMount() {\n    BooksAPI.getAll().then(res => this.getData(res));\n  }\n\n  render() {\n    return (\n      <div className=\"app\">\n        {this.state.message.length > 0 && (\n          <Notification\n            message={this.state.message}\n            showItem={this.state.active ? \"fadeIn\" : \"fadeOut\"}\n            status={this.state.status ? \"success\" : \"error\"}\n          />\n        )}\n        <Route\n          path=\"/search\"\n          render={() => (\n            <div>\n              <Search\n                searchItem={this.state.searchItem}\n                searchForBooks={this.searchForBooks}\n              />\n              <SearchResult\n                bookList={this.state.books}\n                searchItem={this.state.searchItem}\n                chooseOption={this.chooseOption}\n                loading={this.state.loading}\n                shelf={this.selectShelf}\n              />\n            </div>\n          )}\n        />\n\n        <Route\n          exact\n          path=\"/\"\n          render={() => (\n            <div>\n              <div className=\"list-books\">\n                <div className=\"list-books-title\">\n                  <h1>{process.env.REACT_APP_MY_READ}</h1>\n                </div>\n                <div className=\"list-books-content\">\n                  <div>\n                    {this.state.renderCurrentlyRead && (\n                      <CurrentlyReading\n                        books={this.state.books}\n                        chooseOption={this.chooseOption}\n                        shelf={this.selectShelf}\n                      />\n                    )}\n                    {this.state.renderWantToRead && (\n                      <WanttoRead\n                        books={this.state.books}\n                        chooseOption={this.chooseOption}\n                        shelf={this.selectShelf}\n                      />\n                    )}\n                    {this.state.renderRead && (\n                      <Read\n                        books={this.state.books}\n                        chooseOption={this.chooseOption}\n                        shelf={this.selectShelf}\n                      />\n                    )}\n                  </div>\n                </div>\n              </div>\n              <AddBook />\n            </div>\n          )}\n        />\n      </div>\n    );\n  }\n}\n\nexport default BooksApp;\n"]},"metadata":{},"sourceType":"module"}