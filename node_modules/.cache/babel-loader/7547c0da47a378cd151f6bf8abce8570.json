{"ast":null,"code":"import _toConsumableArray from \"/Users/Ose/Documents/Osemwengie/reactproj/reactnd-project-myreads-starter/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/Ose/Documents/Osemwengie/reactproj/reactnd-project-myreads-starter/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/Ose/Documents/Osemwengie/reactproj/reactnd-project-myreads-starter/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/Ose/Documents/Osemwengie/reactproj/reactnd-project-myreads-starter/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/Ose/Documents/Osemwengie/reactproj/reactnd-project-myreads-starter/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/Ose/Documents/Osemwengie/reactproj/reactnd-project-myreads-starter/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/Ose/Documents/Osemwengie/reactproj/reactnd-project-myreads-starter/src/App.js\";\nimport React from \"react\";\nimport * as BooksAPI from \"./BooksAPI\";\nimport \"./App.css\";\nimport Search from \"./Search\";\nimport CurrentlyReading from \"./CurrentlyReading\";\nimport WanttoRead from \"./WanttoRead\";\nimport Read from \"./Read\";\nimport AddBook from \"./AddBook\";\nimport SearchResult from \"./SearchResult\";\nimport { Route } from \"react-router-dom\";\nimport { debounce } from \"debounce\";\nimport Notification from \"./Notification\"; //import ApiCall from \"../src/utils/ApiCall\";\n\nvar BooksApp =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(BooksApp, _React$Component);\n\n  function BooksApp() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, BooksApp);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(BooksApp)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      /**\n       * TODO: Instead of using this state variable to keep track of which page\n       * we're on, use the URL in the browser's address bar. This will ensure that\n       * users can use the browser's back and forward buttons to navigate between\n       * pages, as well as provide a good URL they can bookmark and share.\n       */\n      books: [],\n      searchItem: \"\",\n      currentlyReading: [],\n      wantToRead: [],\n      read: [],\n      myread: [],\n      message: \"\",\n      timerevent: 0\n    };\n\n    _this.searchForBooks = function (event) {\n      debounce(_this.setState({\n        searchItem: event.target.value\n      }), 500);\n\n      if (_this.state.timerevent) {\n        clearTimeout(_this.state.timerevent);\n      }\n\n      _this.APIDataCall(_this.state.searchItem); //ApiCall(this.state.searchItem);\n\n    };\n\n    _this.APIDataCall = function (search) {\n      _this.setState({\n        books: []\n      });\n\n      if (search.trim() && search.trim().length > 0) {\n        var timerapi = setTimeout(function () {\n          BooksAPI.search(search.trim()).then(function (data) {\n            data.map(function (value) {\n              return _this.setState({\n                books: _toConsumableArray(_this.state.books).concat([value])\n              });\n            });\n          }).catch(function (err) {\n            return console.log(\"Book not found\");\n          });\n        }, 500);\n\n        _this.setState({\n          timerevent: timerapi\n        });\n      }\n    };\n\n    _this.addBookCheck = function (booksAdd) {\n      if (_this.state.currentlyReading.some(function (el) {\n        return el.id === booksAdd;\n      })) {\n        return {\n          result: true,\n          message: \"Book already exist in Currently Reading Section\"\n        };\n      }\n\n      if (_this.state.wantToRead.some(function (el) {\n        return el.id === booksAdd;\n      })) {\n        return {\n          result: true,\n          message: \"Book already exist in Want To Read Section\"\n        };\n      }\n\n      if (_this.state.read.some(function (el) {\n        return el.id === booksAdd;\n      })) {\n        return {\n          result: true,\n          message: \"Book already exist in Read Section\"\n        };\n      }\n\n      return {\n        result: false,\n        message: \"Book successly added\"\n      };\n    };\n\n    _this.showDisplay = function (message) {\n      _this.timer = setTimeout(function () {\n        _this.setState({\n          message: message\n        });\n      }, 250);\n    };\n\n    _this.chooseOption = function (event) {\n      var _event$target = event.target,\n          selectedIndex = _event$target.selectedIndex,\n          options = _event$target.options;\n      var boodID = options[selectedIndex].dataset.bookid;\n\n      var booksAdd = _this.state.books.find(function (book) {\n        return book.id === boodID;\n      });\n\n      var value = options[selectedIndex].text;\n\n      var _this$addBookCheck = _this.addBookCheck(booksAdd.id),\n          result = _this$addBookCheck.result,\n          message = _this$addBookCheck.message;\n\n      if (result) {\n        _this.showDisplay(message);\n      } else {\n        switch (value) {\n          case process.env.REACT_APP_CURR_READ:\n            _this.setState({\n              currentlyReading: _toConsumableArray(_this.state.currentlyReading).concat([booksAdd])\n            });\n\n            break;\n\n          case process.env.REACT_APP_WANT_READ:\n            _this.setState({\n              wantToRead: _toConsumableArray(_this.state.wantToRead).concat([booksAdd])\n            });\n\n            break;\n\n          case process.env.REACT_APP_READ:\n            _this.setState({\n              read: _toConsumableArray(_this.state.read).concat([booksAdd])\n            });\n\n            break;\n\n          default:\n            console.log(\"Nothing selected\");\n        }\n\n        _this.showDisplay(message);\n      }\n\n      var addItem = {\n        booksAdd: booksAdd,\n        status: value\n      };\n\n      _this.setState({\n        myread: _toConsumableArray(_this.state.myread).concat([addItem])\n      });\n\n      console.log(value);\n      console.log(_this.state.currentlyReading);\n    };\n\n    return _this;\n  }\n\n  _createClass(BooksApp, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {//BooksAPI.search(this.state.booksSearch).then(books => console.log(books));\n      //this.getBookSearchResult()\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        className: \"app\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, React.createElement(Route, {\n        path: \"/search\",\n        render: function render() {\n          return React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 155\n            },\n            __self: this\n          }, React.createElement(Search, {\n            searchItem: _this2.state.searchItem,\n            searchForBooks: _this2.searchForBooks,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 156\n            },\n            __self: this\n          }), _this2.state.message.length > 0 && React.createElement(Notification, {\n            message: _this2.state.message,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 161\n            },\n            __self: this\n          }), React.createElement(SearchResult, {\n            bookList: _this2.state.books,\n            searchItem: _this2.state.searchItem,\n            chooseOption: _this2.chooseOption,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 163\n            },\n            __self: this\n          }));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }), React.createElement(Route, {\n        exact: true,\n        path: \"/\",\n        render: function render() {\n          return React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 176\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            className: \"list-books\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 177\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            className: \"list-books-title\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 178\n            },\n            __self: this\n          }, React.createElement(\"h1\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 179\n            },\n            __self: this\n          }, process.env.REACT_APP_MY_READ)), React.createElement(\"div\", {\n            className: \"list-books-content\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 181\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 182\n            },\n            __self: this\n          }, React.createElement(CurrentlyReading, {\n            currentlyReading: _this2.state.currentlyReading,\n            chooseOption: _this2.chooseOption,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 183\n            },\n            __self: this\n          }), React.createElement(WanttoRead, {\n            wantToRead: _this2.state.wantToRead,\n            chooseOption: _this2.chooseOption,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 187\n            },\n            __self: this\n          }), React.createElement(Read, {\n            read: _this2.state.read,\n            chooseOption: _this2.chooseOption,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 191\n            },\n            __self: this\n          })))), React.createElement(AddBook, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 198\n            },\n            __self: this\n          }));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return BooksApp;\n}(React.Component);\n\nexport default BooksApp;","map":{"version":3,"sources":["/Users/Ose/Documents/Osemwengie/reactproj/reactnd-project-myreads-starter/src/App.js"],"names":["React","BooksAPI","Search","CurrentlyReading","WanttoRead","Read","AddBook","SearchResult","Route","debounce","Notification","BooksApp","state","books","searchItem","currentlyReading","wantToRead","read","myread","message","timerevent","searchForBooks","event","setState","target","value","clearTimeout","APIDataCall","search","trim","length","timerapi","setTimeout","then","data","map","catch","err","console","log","addBookCheck","booksAdd","some","el","id","result","showDisplay","timer","chooseOption","selectedIndex","options","boodID","dataset","bookid","find","book","text","process","env","REACT_APP_CURR_READ","REACT_APP_WANT_READ","REACT_APP_READ","addItem","status","REACT_APP_MY_READ","Component"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,KAAKC,QAAZ,MAA0B,YAA1B;AACA,OAAO,WAAP;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,OAAOC,gBAAP,MAA6B,oBAA7B;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,OAAOC,IAAP,MAAiB,QAAjB;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,YAAP,MAAyB,gBAAzB;AACA,SAASC,KAAT,QAAsB,kBAAtB;AACA,SAASC,QAAT,QAAyB,UAAzB;AACA,OAAOC,YAAP,MAAyB,gBAAzB,C,CACA;;IAEMC,Q;;;;;;;;;;;;;;;;;UACJC,K,GAAQ;AACN;;;;;;AAMAC,MAAAA,KAAK,EAAE,EAPD;AAQNC,MAAAA,UAAU,EAAE,EARN;AASNC,MAAAA,gBAAgB,EAAE,EATZ;AAUNC,MAAAA,UAAU,EAAE,EAVN;AAWNC,MAAAA,IAAI,EAAE,EAXA;AAYNC,MAAAA,MAAM,EAAE,EAZF;AAaNC,MAAAA,OAAO,EAAE,EAbH;AAcNC,MAAAA,UAAU,EAAE;AAdN,K;;UAiBRC,c,GAAiB,UAAAC,KAAK,EAAI;AACxBb,MAAAA,QAAQ,CAAC,MAAKc,QAAL,CAAc;AAAET,QAAAA,UAAU,EAAEQ,KAAK,CAACE,MAAN,CAAaC;AAA3B,OAAd,CAAD,EAAoD,GAApD,CAAR;;AACA,UAAI,MAAKb,KAAL,CAAWQ,UAAf,EAA2B;AACzBM,QAAAA,YAAY,CAAC,MAAKd,KAAL,CAAWQ,UAAZ,CAAZ;AACD;;AACD,YAAKO,WAAL,CAAiB,MAAKf,KAAL,CAAWE,UAA5B,EALwB,CAMxB;;AACD,K;;UAEDa,W,GAAc,UAAAC,MAAM,EAAI;AACtB,YAAKL,QAAL,CAAc;AACZV,QAAAA,KAAK,EAAE;AADK,OAAd;;AAGA,UAAIe,MAAM,CAACC,IAAP,MAAiBD,MAAM,CAACC,IAAP,GAAcC,MAAd,GAAuB,CAA5C,EAA+C;AAC7C,YAAMC,QAAQ,GAAGC,UAAU,CAAC,YAAM;AAChC/B,UAAAA,QAAQ,CAAC2B,MAAT,CAAgBA,MAAM,CAACC,IAAP,EAAhB,EACGI,IADH,CACQ,UAAAC,IAAI,EAAI;AACZA,YAAAA,IAAI,CAACC,GAAL,CAAS,UAAAV,KAAK;AAAA,qBACZ,MAAKF,QAAL,CAAc;AACZV,gBAAAA,KAAK,qBAAM,MAAKD,KAAL,CAAWC,KAAjB,UAAwBY,KAAxB;AADO,eAAd,CADY;AAAA,aAAd;AAKD,WAPH,EAQGW,KARH,CAQS,UAAAC,GAAG;AAAA,mBAAIC,OAAO,CAACC,GAAR,CAAY,gBAAZ,CAAJ;AAAA,WARZ;AASD,SAV0B,EAUxB,GAVwB,CAA3B;;AAYA,cAAKhB,QAAL,CAAc;AACZH,UAAAA,UAAU,EAAEW;AADA,SAAd;AAGD;AACF,K;;UAEDS,Y,GAAe,UAAAC,QAAQ,EAAI;AACzB,UAAI,MAAK7B,KAAL,CAAWG,gBAAX,CAA4B2B,IAA5B,CAAiC,UAAAC,EAAE;AAAA,eAAIA,EAAE,CAACC,EAAH,KAAUH,QAAd;AAAA,OAAnC,CAAJ,EAAgE;AAC9D,eAAO;AACLI,UAAAA,MAAM,EAAE,IADH;AAEL1B,UAAAA,OAAO,EAAE;AAFJ,SAAP;AAID;;AACD,UAAI,MAAKP,KAAL,CAAWI,UAAX,CAAsB0B,IAAtB,CAA2B,UAAAC,EAAE;AAAA,eAAIA,EAAE,CAACC,EAAH,KAAUH,QAAd;AAAA,OAA7B,CAAJ,EAA0D;AACxD,eAAO;AACLI,UAAAA,MAAM,EAAE,IADH;AAEL1B,UAAAA,OAAO,EAAE;AAFJ,SAAP;AAID;;AAED,UAAI,MAAKP,KAAL,CAAWK,IAAX,CAAgByB,IAAhB,CAAqB,UAAAC,EAAE;AAAA,eAAIA,EAAE,CAACC,EAAH,KAAUH,QAAd;AAAA,OAAvB,CAAJ,EAAoD;AAClD,eAAO;AACLI,UAAAA,MAAM,EAAE,IADH;AAEL1B,UAAAA,OAAO,EAAE;AAFJ,SAAP;AAID;;AACD,aAAO;AACL0B,QAAAA,MAAM,EAAE,KADH;AAEL1B,QAAAA,OAAO,EAAE;AAFJ,OAAP;AAID,K;;UAED2B,W,GAAc,UAAA3B,OAAO,EAAI;AACvB,YAAK4B,KAAL,GAAaf,UAAU,CAAC,YAAM;AAC5B,cAAKT,QAAL,CAAc;AACZJ,UAAAA,OAAO,EAAPA;AADY,SAAd;AAGD,OAJsB,EAIpB,GAJoB,CAAvB;AAKD,K;;UAED6B,Y,GAAe,UAAA1B,KAAK,EAAI;AAAA,0BACaA,KAAK,CAACE,MADnB;AAAA,UACdyB,aADc,iBACdA,aADc;AAAA,UACCC,OADD,iBACCA,OADD;AAEtB,UAAMC,MAAM,GAAGD,OAAO,CAACD,aAAD,CAAP,CAAuBG,OAAvB,CAA+BC,MAA9C;;AACA,UAAMZ,QAAQ,GAAG,MAAK7B,KAAL,CAAWC,KAAX,CAAiByC,IAAjB,CAAsB,UAAAC,IAAI;AAAA,eAAIA,IAAI,CAACX,EAAL,KAAYO,MAAhB;AAAA,OAA1B,CAAjB;;AACA,UAAM1B,KAAK,GAAGyB,OAAO,CAACD,aAAD,CAAP,CAAuBO,IAArC;;AAJsB,+BAMM,MAAKhB,YAAL,CAAkBC,QAAQ,CAACG,EAA3B,CANN;AAAA,UAMdC,MANc,sBAMdA,MANc;AAAA,UAMN1B,OANM,sBAMNA,OANM;;AAQtB,UAAI0B,MAAJ,EAAY;AACV,cAAKC,WAAL,CAAiB3B,OAAjB;AACD,OAFD,MAEO;AACL,gBAAQM,KAAR;AACE,eAAKgC,OAAO,CAACC,GAAR,CAAYC,mBAAjB;AACE,kBAAKpC,QAAL,CAAc;AACZR,cAAAA,gBAAgB,qBAAM,MAAKH,KAAL,CAAWG,gBAAjB,UAAmC0B,QAAnC;AADJ,aAAd;;AAGA;;AACF,eAAKgB,OAAO,CAACC,GAAR,CAAYE,mBAAjB;AACE,kBAAKrC,QAAL,CAAc;AACZP,cAAAA,UAAU,qBAAM,MAAKJ,KAAL,CAAWI,UAAjB,UAA6ByB,QAA7B;AADE,aAAd;;AAGA;;AACF,eAAKgB,OAAO,CAACC,GAAR,CAAYG,cAAjB;AACE,kBAAKtC,QAAL,CAAc;AACZN,cAAAA,IAAI,qBAAM,MAAKL,KAAL,CAAWK,IAAjB,UAAuBwB,QAAvB;AADQ,aAAd;;AAGA;;AACF;AACEH,YAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ;AAjBJ;;AAmBA,cAAKO,WAAL,CAAiB3B,OAAjB;AACD;;AAED,UAAM2C,OAAO,GAAG;AACdrB,QAAAA,QAAQ,EAARA,QADc;AAEdsB,QAAAA,MAAM,EAAEtC;AAFM,OAAhB;;AAKA,YAAKF,QAAL,CAAc;AACZL,QAAAA,MAAM,qBAAM,MAAKN,KAAL,CAAWM,MAAjB,UAAyB4C,OAAzB;AADM,OAAd;;AAGAxB,MAAAA,OAAO,CAACC,GAAR,CAAYd,KAAZ;AACAa,MAAAA,OAAO,CAACC,GAAR,CAAY,MAAK3B,KAAL,CAAWG,gBAAvB;AACD,K;;;;;;;wCAEmB,CAClB;AACA;AACD;;;6BAEQ;AAAA;;AACP,aACE;AAAK,QAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,KAAD;AACE,QAAA,IAAI,EAAC,SADP;AAEE,QAAA,MAAM,EAAE;AAAA,iBACN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACE,oBAAC,MAAD;AACE,YAAA,UAAU,EAAE,MAAI,CAACH,KAAL,CAAWE,UADzB;AAEE,YAAA,cAAc,EAAE,MAAI,CAACO,cAFvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,EAKG,MAAI,CAACT,KAAL,CAAWO,OAAX,CAAmBW,MAAnB,GAA4B,CAA5B,IACC,oBAAC,YAAD;AAAc,YAAA,OAAO,EAAE,MAAI,CAAClB,KAAL,CAAWO,OAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YANJ,EAQE,oBAAC,YAAD;AACE,YAAA,QAAQ,EAAE,MAAI,CAACP,KAAL,CAAWC,KADvB;AAEE,YAAA,UAAU,EAAE,MAAI,CAACD,KAAL,CAAWE,UAFzB;AAGE,YAAA,YAAY,EAAE,MAAI,CAACkC,YAHrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YARF,CADM;AAAA,SAFV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,EAqBE,oBAAC,KAAD;AACE,QAAA,KAAK,MADP;AAEE,QAAA,IAAI,EAAC,GAFP;AAGE,QAAA,MAAM,EAAE;AAAA,iBACN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACE;AAAK,YAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACE;AAAK,YAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAKS,OAAO,CAACC,GAAR,CAAYM,iBAAjB,CADF,CADF,EAIE;AAAK,YAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACE,oBAAC,gBAAD;AACE,YAAA,gBAAgB,EAAE,MAAI,CAACpD,KAAL,CAAWG,gBAD/B;AAEE,YAAA,YAAY,EAAE,MAAI,CAACiC,YAFrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,EAKE,oBAAC,UAAD;AACE,YAAA,UAAU,EAAE,MAAI,CAACpC,KAAL,CAAWI,UADzB;AAEE,YAAA,YAAY,EAAE,MAAI,CAACgC,YAFrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YALF,EASE,oBAAC,IAAD;AACE,YAAA,IAAI,EAAE,MAAI,CAACpC,KAAL,CAAWK,IADnB;AAEE,YAAA,YAAY,EAAE,MAAI,CAAC+B,YAFrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YATF,CADF,CAJF,CADF,EAsBE,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAtBF,CADM;AAAA,SAHV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QArBF,CADF;AAsDD;;;;EA7LoBhD,KAAK,CAACiE,S;;AAgM7B,eAAetD,QAAf","sourcesContent":["import React from \"react\";\nimport * as BooksAPI from \"./BooksAPI\";\nimport \"./App.css\";\nimport Search from \"./Search\";\nimport CurrentlyReading from \"./CurrentlyReading\";\nimport WanttoRead from \"./WanttoRead\";\nimport Read from \"./Read\";\nimport AddBook from \"./AddBook\";\nimport SearchResult from \"./SearchResult\";\nimport { Route } from \"react-router-dom\";\nimport { debounce } from \"debounce\";\nimport Notification from \"./Notification\";\n//import ApiCall from \"../src/utils/ApiCall\";\n\nclass BooksApp extends React.Component {\n  state = {\n    /**\n     * TODO: Instead of using this state variable to keep track of which page\n     * we're on, use the URL in the browser's address bar. This will ensure that\n     * users can use the browser's back and forward buttons to navigate between\n     * pages, as well as provide a good URL they can bookmark and share.\n     */\n    books: [],\n    searchItem: \"\",\n    currentlyReading: [],\n    wantToRead: [],\n    read: [],\n    myread: [],\n    message: \"\",\n    timerevent: 0\n  };\n\n  searchForBooks = event => {\n    debounce(this.setState({ searchItem: event.target.value }), 500);\n    if (this.state.timerevent) {\n      clearTimeout(this.state.timerevent);\n    }\n    this.APIDataCall(this.state.searchItem);\n    //ApiCall(this.state.searchItem);\n  };\n\n  APIDataCall = search => {\n    this.setState({\n      books: []\n    });\n    if (search.trim() && search.trim().length > 0) {\n      const timerapi = setTimeout(() => {\n        BooksAPI.search(search.trim())\n          .then(data => {\n            data.map(value =>\n              this.setState({\n                books: [...this.state.books, value]\n              })\n            );\n          })\n          .catch(err => console.log(\"Book not found\"));\n      }, 500);\n\n      this.setState({\n        timerevent: timerapi\n      });\n    }\n  };\n\n  addBookCheck = booksAdd => {\n    if (this.state.currentlyReading.some(el => el.id === booksAdd)) {\n      return {\n        result: true,\n        message: \"Book already exist in Currently Reading Section\"\n      };\n    }\n    if (this.state.wantToRead.some(el => el.id === booksAdd)) {\n      return {\n        result: true,\n        message: \"Book already exist in Want To Read Section\"\n      };\n    }\n\n    if (this.state.read.some(el => el.id === booksAdd)) {\n      return {\n        result: true,\n        message: \"Book already exist in Read Section\"\n      };\n    }\n    return {\n      result: false,\n      message: \"Book successly added\"\n    };\n  };\n\n  showDisplay = message => {\n    this.timer = setTimeout(() => {\n      this.setState({\n        message\n      });\n    }, 250);\n  };\n\n  chooseOption = event => {\n    const { selectedIndex, options } = event.target;\n    const boodID = options[selectedIndex].dataset.bookid;\n    const booksAdd = this.state.books.find(book => book.id === boodID);\n    const value = options[selectedIndex].text;\n\n    const { result, message } = this.addBookCheck(booksAdd.id);\n\n    if (result) {\n      this.showDisplay(message);\n    } else {\n      switch (value) {\n        case process.env.REACT_APP_CURR_READ:\n          this.setState({\n            currentlyReading: [...this.state.currentlyReading, booksAdd]\n          });\n          break;\n        case process.env.REACT_APP_WANT_READ:\n          this.setState({\n            wantToRead: [...this.state.wantToRead, booksAdd]\n          });\n          break;\n        case process.env.REACT_APP_READ:\n          this.setState({\n            read: [...this.state.read, booksAdd]\n          });\n          break;\n        default:\n          console.log(\"Nothing selected\");\n      }\n      this.showDisplay(message);\n    }\n\n    const addItem = {\n      booksAdd,\n      status: value\n    };\n\n    this.setState({\n      myread: [...this.state.myread, addItem]\n    });\n    console.log(value);\n    console.log(this.state.currentlyReading);\n  };\n\n  componentDidMount() {\n    //BooksAPI.search(this.state.booksSearch).then(books => console.log(books));\n    //this.getBookSearchResult()\n  }\n\n  render() {\n    return (\n      <div className=\"app\">\n        <Route\n          path=\"/search\"\n          render={() => (\n            <div>\n              <Search\n                searchItem={this.state.searchItem}\n                searchForBooks={this.searchForBooks}\n              />\n              {this.state.message.length > 0 && (\n                <Notification message={this.state.message} />\n              )}\n              <SearchResult\n                bookList={this.state.books}\n                searchItem={this.state.searchItem}\n                chooseOption={this.chooseOption}\n              />\n            </div>\n          )}\n        />\n\n        <Route\n          exact\n          path=\"/\"\n          render={() => (\n            <div>\n              <div className=\"list-books\">\n                <div className=\"list-books-title\">\n                  <h1>{process.env.REACT_APP_MY_READ}</h1>\n                </div>\n                <div className=\"list-books-content\">\n                  <div>\n                    <CurrentlyReading\n                      currentlyReading={this.state.currentlyReading}\n                      chooseOption={this.chooseOption}\n                    />\n                    <WanttoRead\n                      wantToRead={this.state.wantToRead}\n                      chooseOption={this.chooseOption}\n                    />\n                    <Read\n                      read={this.state.read}\n                      chooseOption={this.chooseOption}\n                    />\n                  </div>\n                </div>\n              </div>\n              <AddBook />\n            </div>\n          )}\n        />\n      </div>\n    );\n  }\n}\n\nexport default BooksApp;\n"]},"metadata":{},"sourceType":"module"}